<html>
    <head>
        <meta charset="utf-8">
        <title>2.1.2 实现文章列表</title>
    </head>
    <body>
        <div id="wrapper"></div>
    </body>
    <script>

        /**
         * 得到文章
         * @param {string} title 文章标题
         * @param {string} likeCount 初始喜欢数
         * @return {DOM} domArticle 文章的 DOM 对象
         */
        function getArticle(title, likeCount) {
            const template = `
                <div class="article">
                    ${title}
                    <span class="like">
                        ❤
                        <span class="like-count">
                            ${likeCount}
                        </span>
                    </span>
                </div>
            `;

            // 使用模板生成 DOM
            const domArticle = document.createElement('div');
            domArticle.innerHTML = template;

            // 内部维护计数器
            let mLikeCount = likeCount;

            // 获得内部的喜欢计数 DOM
            const domLikeCount = domArticle.querySelector('.like-count');

            // 注册点击事件
            domArticle.addEventListener('click', function (e) {
                mLikeCount++;
                // 更新视图
                domLikeCount.innerText = mLikeCount;
            }, false);

            return domArticle;
        }

        // 获得容器的 dom 节点
        const domWrapper = document.querySelector('#wrapper');

        // 假设列表长度为 10
        for (let i = 0; i < 10; i++) {
            // 得到每一项的 dom
            const domItem = getArticle(`测试文章${i}`, 0);
            // 依次添加到容器 dom 中
            domWrapper.appendChild(domItem);
        }

    </script>
</html>
